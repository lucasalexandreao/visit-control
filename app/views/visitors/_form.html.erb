<div class="container-fluid d-flex justify-content-center mt-5">
  <div class="col-12 col-md-10 col-lg-8 col-xl-7 p-4 border rounded shadow">
    <%= form_with(model: visitor, class: "needs-validation", novalidate: true) do |form| %>
      <% if visitor.errors.any? %>
        <div class="alert alert-danger">
          <ul>
            <% visitor.errors.each do |error| %>
              <li><%= error.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="mb-3">
        <%= form.label :cpf, "CPF", class: "form-label" %>
        <%= form.text_field :cpf, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :name, "Nome", class: "form-label" %>
        <%= form.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :rg, "RG", class: "form-label" %>
        <%= form.text_field :rg, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :phone, "Telefone", class: "form-label" %>
        <%= form.text_field :phone, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= form.label :photo, "Foto", class: "form-label" %>
        <%= form.file_field :photo, class: "form-control", id: "foto-input" %>
      </div>

      <!-- Captura de foto via webcam -->
      <div class="mb-3 text-center" data-controller="camera">
        <button type="button" class="btn btn-primary" id="ativar-camera">Ativar Câmera</button>
        <video id="webcam" autoplay style="display: none; max-width: 100%; height: auto;" class="mt-3"></video>
        <button type="button" class="btn btn-warning mt-2" id="capturar-foto" style="display: none;">Capturar Foto</button>
        <button type="button" class="btn btn-danger mt-2" id="desligar-camera" style="display: none;">Desligar Câmera</button>
        <canvas id="canvas" style="display: none; max-width: 100%; height: auto;"></canvas>
      </div>

      <div class="d-grid">
        <%= form.submit "Salvar", class: "btn btn-success" %>
      </div>
    <% end %>
  </div>
</div>
