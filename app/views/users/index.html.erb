<% content_for :title, "Users" %>

<div class="d-flex my-3 justify-content-between align-items-center">
  <h1 class="mb-0">Usuários</h1>
  <%= link_to "Adicionar usuário", new_user_path, class: "btn btn-dark fw-semibold d-flex" %>
</div>

<div class="border border-light-subtle p-3 rounded-4">
  <table class="table table-striped table-hover mb-0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Email</th>
        <th>Papel</th>
        <th class="text-end" style="transform: translateX(-1rem)">Ação</th>
      </tr>
    </thead>

    <tbody class="align-middle">
      <% @users.each do |user| %>
        <tr>
          <td style="width: 100px;"><%= user.id %></td>
          <td><%= user.email %></td>
          <td><%= user.role %></td>
          <td class="text-end">
            <div class="d-inline-flex gap-2">
              <%= link_to edit_user_path(user), class: "btn btn-sm btn-dark border", role: "button" do %>
                <i class="fa fa-edit"></i>
              <% end %>
              <% if can?(:destroy, user) %>
                <%= button_to user_path(user), method: :delete, data: { confirm: "Tem certeza que deseja excluir este usuário?" }, class: "btn btn-sm btn-danger border delete-button" do %>
                  <i class="fa fa-trash"></i>
                <% end %>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
